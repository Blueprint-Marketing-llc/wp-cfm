<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="WP-CFM : WordPress Configuration Management">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>WP-CFM</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/forumone/wp-cfm">View on GitHub</a>

          <h1 id="project_title">WP-CFM</h1>
          <h2 id="project_tagline">WordPress Configuration Management</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/forumone/wp-cfm/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/forumone/wp-cfm/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h4>
<a id="wp-cfm-configuration-management-for-wordpress" class="anchor" href="#wp-cfm-configuration-management-for-wordpress" aria-hidden="true"><span class="octicon octicon-link"></span></a>WP-CFM: Configuration Management for WordPress</h4>

<p><a href="http://wordpress.org/plugins/wp-cfm/">Download on WordPress.org</a></p>

<p>Deploying database changes in WordPress is hard, especially when working on teams with multiple developers. This project aims at solving this problem by storing database configuration in the filesystem. It's like Drupal's "Features" module for WordPress.</p>

<p><img src="http://i.imgur.com/opQhDUa.png" alt="Admin Screen"></p>

<p><a href="http://screencast.com/t/HGmkd8S44P7s">Watch the introduction screencast (4 minutes)</a></p>

<h4>
<a id="what-does-this-mean-for-me" class="anchor" href="#what-does-this-mean-for-me" aria-hidden="true"><span class="octicon octicon-link"></span></a>What does this mean for me?</h4>

<ul>
<li>Less need to copy the database. If you make changes, <strong>Push</strong> your bundle to the filesystem. To load changes, <strong>Pull</strong> the bundle into your database.</li>
<li>No need to manually apply database settings changes. No more "fire drills" where you're rushing to figure out which settings you forgot to change.</li>
<li>Track and migrate configuration files using git, subversion, etc.</li>
</ul>

<h4>
<a id="terminology" class="anchor" href="#terminology" aria-hidden="true"><span class="octicon octicon-link"></span></a>Terminology</h4>

<ul>
<li>
<strong>Bundle</strong>: A group of settings to track. This could be a single setting, or all the site's available settings.</li>
<li>
<strong>Push</strong>: Export configuration from your database to the filesystem.</li>
<li>
<strong>Pull</strong>: Import configuration from the filesystem into your database.</li>
</ul>

<h4>
<a id="developer-hooks" class="anchor" href="#developer-hooks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Developer Hooks</h4>

<p>The <code>wpcfm_configuration_items</code> hook lets you register custom configuration items.</p>

<div class="highlight highlight-php"><pre><span class="pl-s2"><span class="pl-st">function</span> <span class="pl-en">my_configuration_items</span>( <span class="pl-vo">$items</span> ) {</span>
<span class="pl-s2">    <span class="pl-vo">$items</span>[<span class="pl-s1"><span class="pl-pds">'</span>cfs_field_groups<span class="pl-pds">'</span></span>] <span class="pl-k">=</span> <span class="pl-s3">array</span>(</span>
<span class="pl-s2">        <span class="pl-s1"><span class="pl-pds">'</span>value<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s1"><span class="pl-pds">'</span>MY CONFIGURATION DATA<span class="pl-pds">'</span></span>,</span>
<span class="pl-s2">        <span class="pl-s1"><span class="pl-pds">'</span>group<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s1"><span class="pl-pds">'</span>WP Options<span class="pl-pds">'</span></span>, <span class="pl-c">// optional</span></span>
<span class="pl-s2">        <span class="pl-s1"><span class="pl-pds">'</span>callback<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s1"><span class="pl-pds">'</span>my_pull_handler<span class="pl-pds">'</span></span>, <span class="pl-c">// optional</span></span>
<span class="pl-s2">    );</span>
<span class="pl-s2">    <span class="pl-k">return</span> <span class="pl-vo">$items</span>;</span>
<span class="pl-s2">}</span>
<span class="pl-s2">add_filter( <span class="pl-s1"><span class="pl-pds">'</span>wpcfm_configuration_items<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>my_configuration_items<span class="pl-pds">'</span></span> );</span></pre></div>

<p>This filter contains an associative array of all configuration options. Each option has a unique key, and supports several parameters:</p>

<ul>
<li>
<strong>value</strong>: (required) The configuration data to store.</li>
<li>
<strong>group</strong>: (optional) A group name, allowing multiple configuration options to be grouped together. This is only used in the admin UI. Default = "WP Options"</li>
<li>
<strong>callback</strong>: (optional) If the configuration data is <strong>not</strong> stored within <code>wp_options</code>, then WP-CFM needs to know how to Pull it into the database. This parameter accepts a (string) function name or (array) method. A <code>$params</code> array is passed into the callback function (see below).</li>
</ul>

<h4>
<a id="is-that-it" class="anchor" href="#is-that-it" aria-hidden="true"><span class="octicon octicon-link"></span></a>Is that it?</h4>

<p>Almost! WP-CFM automatically handles configuration within the <code>wp_options</code> table. If your plugin stores settings elsewhere, then use the above <code>callback</code> parameter to tell WP-CFM how to properly import (Pull) configuration into the database.</p>

<div class="highlight highlight-php"><pre><span class="pl-s2"><span class="pl-c">/**</span></span>
<span class="pl-s2"><span class="pl-c"> * $params['name']          The option name</span></span>
<span class="pl-s2"><span class="pl-c"> * $params['group']         The option group</span></span>
<span class="pl-s2"><span class="pl-c"> * $params['old_value']     The current DB value that will get overwritten</span></span>
<span class="pl-s2"><span class="pl-c"> * $params['new_value']     The new DB value</span></span>
<span class="pl-s2"><span class="pl-c"> */</span></span>
<span class="pl-s2"><span class="pl-st">function</span> <span class="pl-en">my_pull_handler</span>( <span class="pl-vo">$params</span> ) {</span>
<span class="pl-s2">    <span class="pl-c">// Save something</span></span>
<span class="pl-s2">}</span></pre></div>

<h4>
<a id="wp-cli" class="anchor" href="#wp-cli" aria-hidden="true"><span class="octicon octicon-link"></span></a>WP-CLI</h4>

<p>WP-CFM supports pulling / pushing bundles from the command-line using <a href="http://wp-cli.org/">WP-CLI</a>:</p>

<div class="highlight highlight-php"><pre><span class="pl-s2"><span class="pl-c1">wp</span> <span class="pl-c1">config</span> <span class="pl-c1">pull</span> <span class="pl-k">&lt;</span><span class="pl-c1">bundle_name</span><span class="pl-k">&gt;</span></span>
<span class="pl-s2"><span class="pl-c1">wp</span> <span class="pl-c1">config</span> <span class="pl-c1">push</span> <span class="pl-k">&lt;</span><span class="pl-c1">bundle_name</span><span class="pl-k">&gt;</span></span></pre></div>

<p>You can optionally set <code>bundle_name</code> to "all" to push / pull all bundles at once.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">WP-CFM maintained by <a href="https://github.com/forumone">forumone</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-138081-15");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
