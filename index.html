<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>WP-CFM by forumone</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>WP-CFM</h1>
          <h2>WordPress Configuration Management</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/forumone/wp-cfm/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/forumone/wp-cfm/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/forumone/wp-cfm" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h4>
<a name="wp-cfm-configuration-management-for-wordpress" class="anchor" href="#wp-cfm-configuration-management-for-wordpress"><span class="octicon octicon-link"></span></a>WP-CFM: Configuration Management for WordPress</h4>

<p>Deploying database changes in WordPress is hard, especially when working on teams with multiple developers. This project aims at solving this problem by storing database configuration in the filesystem. It's like Drupal's "Features" module for WordPress.</p>

<p><img src="http://i.imgur.com/opQhDUa.png" alt="Admin Screen"></p>

<p><a href="http://screencast.com/t/HGmkd8S44P7s">Watch the introduction screencast (4 minutes)</a></p>

<h4>
<a name="what-does-this-mean-for-me" class="anchor" href="#what-does-this-mean-for-me"><span class="octicon octicon-link"></span></a>What does this mean for me?</h4>

<ul>
<li>Less need to copy the database. If you make changes, <strong>Push</strong> your bundle to the filesystem. To load changes, <strong>Pull</strong> the bundle into your database.</li>
<li>No need to manually apply database settings changes. No more "fire drills" where you're rushing to figure out which settings you forgot to change.</li>
</ul><h4>
<a name="terminology" class="anchor" href="#terminology"><span class="octicon octicon-link"></span></a>Terminology</h4>

<ul>
<li>
<strong>Bundle</strong>: A group of settings to track. This could be a single setting, or all the site's available settings.</li>
<li>
<strong>Push</strong>: Export configuration from your database to the filesystem.</li>
<li>
<strong>Pull</strong>: Import configuration from the filesystem into your database.</li>
</ul><h4>
<a name="developer-hooks" class="anchor" href="#developer-hooks"><span class="octicon octicon-link"></span></a>Developer Hooks</h4>

<p>The <code>wpcfm_configuration_items</code> hook lets you register custom configuration items.</p>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * Register new configuration items</span>
<span class="sd"> */</span>
<span class="k">function</span> <span class="nf">my_configuration_items</span><span class="p">(</span> <span class="nv">$items</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">$items</span><span class="p">[</span><span class="s1">'cfs_field_groups'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'value'</span> <span class="o">=&gt;</span> <span class="s1">'MY CONFIGURATION DATA'</span><span class="p">,</span>
        <span class="s1">'group'</span> <span class="o">=&gt;</span> <span class="s1">'WP Options'</span><span class="p">,</span> <span class="c1">// optional</span>
        <span class="s1">'callback'</span> <span class="o">=&gt;</span> <span class="s1">'my_pull_handler'</span><span class="p">,</span> <span class="c1">// optional</span>
    <span class="p">);</span>
    <span class="k">return</span> <span class="nv">$items</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">add_filter</span><span class="p">(</span> <span class="s1">'wpcfm_configuration_items'</span><span class="p">,</span> <span class="s1">'my_configuration_items'</span> <span class="p">);</span>
</pre></div>

<h4>
<a name="is-that-it" class="anchor" href="#is-that-it"><span class="octicon octicon-link"></span></a>Is that it?</h4>

<p>Almost! WP-CFM automatically handles configuration within the <code>wp_options</code> table. If your plugin stores settings elsewhere, then you'll need to use the above <code>callback</code> parameter to tell WP-CFM how to properly import (Pull) configuration into the database. It accepts a function name (string) or method (array).</p>

<div class="highlight highlight-php"><pre><span class="sd">/**</span>
<span class="sd"> * $params['name']          The option name</span>
<span class="sd"> * $params['group']         The option group</span>
<span class="sd"> * $params['old_value']     The current DB value that will get overwritten</span>
<span class="sd"> * $params['new_value']     The new DB value</span>
<span class="sd"> */</span>
<span class="k">function</span> <span class="nf">my_pull_handler</span><span class="p">(</span> <span class="nv">$params</span> <span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Save something</span>
<span class="p">}</span>
</pre></div>

<h4>
<a name="wp-cli" class="anchor" href="#wp-cli"><span class="octicon octicon-link"></span></a>WP-CLI</h4>

<p>WP-CFM support pulling / pushing bundles from the command-line using <a href="http://wp-cli.org/">WP-CLI</a>:</p>

<div class="highlight highlight-php"><pre><span class="nx">wp</span> <span class="nx">config</span> <span class="nx">pull</span> <span class="o">&lt;</span><span class="nx">bundle_name</span><span class="o">&gt;</span>
<span class="nx">wp</span> <span class="nx">config</span> <span class="nx">push</span> <span class="o">&lt;</span><span class="nx">bundle_name</span><span class="o">&gt;</span>
</pre></div>

<p>You can optionally set <code>bundle_name</code> to "all" to push / pull all bundles at once.</p>
        </section>

        <footer>
          WP-CFM is maintained by <a href="https://github.com/forumone">forumone</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

                  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-51457218-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

      </div>
    </div>
  </body>
</html>